<% layout("/layouts/boilerplate") -%>

<h2 class="mt-4 mb-4">ğŸ“¨ Messages</h2>

<div class="list-group">

  <% if(conversations.length === 0) { %>
    <p>No messages yet.</p>
  <% } %>

  <% conversations.forEach(conv => { %>
    <a href="/chat/<%= conv.listing._id %>/<%= conv.user._id %>" 
       class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">

        <div>
          <strong>@<%= conv.user.username %></strong>
          <br>
          <small><%= conv.lastMessage %></small>
          <br>
          <small class="text-muted"><%= conv.timestamp.toLocaleString() %></small>
        </div>

        <span class="badge bg-primary rounded-pill">Open</span>
    </a>
  <% }) %>

</div>
